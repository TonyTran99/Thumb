<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI YouTube Thumbnail Analyzer</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React Libraries -->
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <!-- Babel to transpile JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* Custom font to match the modern UI */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        /* A custom style to create the grid background effect since Tailwind JIT classes don't work via CDN */
        .bg-grid-custom {
            background-image:
                linear-gradient(rgba(100, 116, 139, 0.1) 1px, transparent 1px),
                linear-gradient(to right, rgba(100, 116, 139, 0.1) 1px, transparent 1px);
            background-size: 2rem 2rem;
        }
    </style>
</head>
<body class="bg-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useCallback, useMemo } = React;

        // --- BIỂU TƯỢỢNG (ICONS) ---
        const UploadCloudIcon = (props) => (
          <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242" /><path d="M12 12v9" /><path d="m16 16-4-4-4 4" />
          </svg>
        );

        const WandSparklesIcon = (props) => (
          <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <path d="m22 2-7 20-4-9-9-4Z" /><path d="M13 22 22 13" />
          </svg>
        );

        const CheckCircleIcon = (props) => (
            <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" /><polyline points="22 4 12 14.01 9 11.01" />
            </svg>
        );

        const AlertTriangleIcon = (props) => (
            <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z" /><line x1="12" x2="12" y1="9" y2="13" /><line x1="12" x2="12.01" y1="17" y2="17" />
            </svg>
        );

        // --- COMPONENT CON ---
        const ScoreBar = ({ label, score }) => {
            const scoreColor = useMemo(() => {
                if (score >= 8) return 'bg-cyan-400';
                if (score >= 5) return 'bg-yellow-400';
                return 'bg-red-500';
            }, [score]);

            return (
                <div className="mb-3">
                    <div className="flex justify-between items-center mb-1 text-sm">
                        <span className="font-medium text-slate-300">{label}</span>
                        <span className={`font-bold ${score >= 8 ? 'text-cyan-400' : score >= 5 ? 'text-yellow-400' : 'text-red-500'}`}>{score}/10</span>
                    </div>
                    <div className="w-full bg-slate-700 rounded-full h-2.5">
                        <div className={`${scoreColor} h-2.5 rounded-full`} style={{ width: `${score * 10}%` }}></div>
                    </div>
                </div>
            );
        };

        const AnalysisResults = ({ analysis }) => (
            <div className="bg-slate-800/50 p-6 rounded-2xl border border-slate-700 backdrop-blur-sm">
                <h3 className="text-2xl font-bold text-white mb-6">Kết quả Phân tích Thumbnail</h3>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <h4 className="text-lg font-semibold text-cyan-400 mb-3">Điểm đánh giá</h4>
                        {analysis.scores.map(item => <ScoreBar key={item.label} {...item} />)}
                    </div>
                    <div>
                        <h4 className="text-lg font-semibold text-cyan-400 mb-3">Nhận xét tự động</h4>
                        <div className="space-y-3 text-slate-300 text-sm">
                            <div className="flex items-start">
                                <CheckCircleIcon className="w-5 h-5 text-green-400 mr-2 flex-shrink-0 mt-0.5" />
                                <span><span className="font-semibold text-white">Điểm mạnh:</span> {analysis.feedback.strengths}</span>
                            </div>
                            <div className="flex items-start">
                                <AlertTriangleIcon className="w-5 h-5 text-yellow-400 mr-2 flex-shrink-0 mt-0.5" />
                                <span><span className="font-semibold text-white">Cần cải thiện:</span> {analysis.feedback.improvements}</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <h4 className="text-lg font-semibold text-cyan-400 mb-3">Mô tả chi tiết</h4>
                    <div className="overflow-x-auto">
                        <table className="w-full text-sm text-left text-slate-300">
                            <thead className="text-xs text-cyan-300 uppercase bg-slate-700/50">
                                <tr>
                                    <th scope="col" className="px-4 py-2 rounded-l-lg">Yếu tố</th>
                                    <th scope="col" className="px-4 py-2 rounded-r-lg">Mô tả</th>
                                </tr>
                            </thead>
                            <tbody>
                                {analysis.details.map((detail, index) => (
                                    <tr key={index} className="border-b border-slate-700">
                                        <td className="px-4 py-2 font-medium text-white whitespace-nowrap">{detail.element}</td>
                                        <td className="px-4 py-2">{detail.description}</td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        );

        const Suggestions = ({ suggestions }) => (
            <div className="bg-slate-800/50 p-6 rounded-2xl border border-slate-700 backdrop-blur-sm space-y-6">
                <div>
                    <h4 className="text-lg font-semibold text-cyan-400 mb-2 flex items-center">
                        <WandSparklesIcon className="w-5 h-5 mr-2" /> A. Gợi ý Tiêu đề (YouTube SEO)
                    </h4>
                    <ul className="list-disc list-inside space-y-2 text-slate-300 pl-2">
                        {suggestions.titles.map((title, i) => <li key={i}>{title}</li>)}
                    </ul>
                </div>
                <div>
                    <h4 className="text-lg font-semibold text-cyan-400 mb-2">B. Gợi ý Text trên Thumbnail</h4>
                    <div className="flex flex-wrap gap-2">
                        {suggestions.thumbnailTexts.map((text, i) => (
                            <span key={i} className="bg-cyan-400/10 text-cyan-300 text-sm font-medium px-3 py-1 rounded-full">{text}</span>
                        ))}
                    </div>
                </div>
                <div>
                    <h4 className="text-lg font-semibold text-cyan-400 mb-2">C. Gợi ý Tone màu & Phong cách</h4>
                    <p className="text-slate-300">{suggestions.style}</p>
                </div>
                <div>
                    <h4 className="text-lg font-semibold text-cyan-400 mb-2">D. Gợi ý Prompt tạo ảnh AI</h4>
                    <div className="bg-slate-900 p-4 rounded-lg border border-slate-700">
                        <p className="text-slate-300 font-mono text-sm">{suggestions.prompt}</p>
                        <button 
                            onClick={() => {
                                navigator.clipboard.writeText(suggestions.prompt);
                                // Optional: add a small feedback message
                                alert('Đã sao chép prompt!');
                            }}
                            className="mt-3 text-xs bg-slate-700 hover:bg-slate-600 text-white font-semibold py-1 px-3 rounded-md transition-colors"
                        >
                            Copy Prompt
                        </button>
                    </div>
                </div>
            </div>
        );

        // --- COMPONENT CHÍNH (APP) ---
        function App() {
            const [image, setImage] = useState(null);
            const [title, setTitle] = useState('');
            const [fileName, setFileName] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const [analysisResult, setAnalysisResult] = useState(null);
            const [suggestions, setSuggestions] = useState(null);
            const [activeTab, setActiveTab] = useState('analysis');
            const [error, setError] = useState('');
            
            const handleImageChange = (e) => {
                const file = e.target.files[0];
                if (file) {
                    if (file.size > 5 * 1024 * 1024) { // 5MB limit
                        setError('Kích thước ảnh quá lớn. Vui lòng chọn ảnh dưới 5MB.');
                        return;
                    }
                    setError('');
                    setFileName(file.name);
                    const reader = new FileReader();
                    reader.onloadend = () => {
                        setImage(reader.result);
                    };
                    reader.readAsDataURL(file);
                }
            };
            
            const handleAnalyze = useCallback(() => {
                if (!image || !title) {
                    setError('Vui lòng tải lên thumbnail và nhập tiêu đề video.');
                    return;
                }
                setError('');
                setIsLoading(true);
                setAnalysisResult(null);
                setSuggestions(null);
                setActiveTab('analysis');

                setTimeout(() => {
                    const mockAnalysis = {
                        scores: [
                            { label: 'Visual Stun Gun (Gây chú ý)', score: 7 },
                            { label: 'Desire Loop (Gợi tò mò)', score: 6 },
                            { label: 'Validation Layer (Củng cố tiêu đề)', score: 8 },
                            { label: '3 Elements Rule (Bố cục 3 yếu tố)', score: 9 },
                            { label: 'Emotion & Lighting (Cảm xúc & Ánh sáng)', score: 5 },
                        ],
                        feedback: {
                            strengths: 'Bố cục rõ ràng, dễ đọc. Hình ảnh có liên quan trực tiếp đến tiêu đề.',
                            improvements: 'Màu sắc hơi nhạt, thiếu độ tương phản. Cảm xúc nhân vật chưa thực sự nổi bật.',
                        },
                        details: [
                            { element: 'Tone màu', description: 'Xanh dương, Trắng - Mang lại cảm giác công nghệ, tin tưởng.' },
                            { element: 'Cảm xúc', description: 'Trung tính, hơi bất ngờ.' },
                            { element: 'Độ tương phản', description: 'Trung bình, có thể cải thiện để text nổi bật hơn.' },
                            { element: 'Bố cục', description: 'Đối tượng chính bên phải, text bên trái - Bố cục A/B cổ điển.' },
                            { element: 'Keyword chính', description: 'AI, HACKS, NEED' },
                        ]
                    };
                    
                    const mockSuggestions = {
                        titles: [
                            "Cách [Chuyên Gia] Sử Dụng AI Để [Đạt Kết Quả] Nhanh Gấp 10 Lần",
                            "Tại Sao 99% Người Dùng AI Vẫn Thất Bại? (Và Cách Sửa)",
                            "Tôi Đã Thử 5 AI Hacks Giúp Tiết Kiệm 20 Giờ/Tuần - Đây là kết quả!",
                        ],
                        thumbnailTexts: [ "AI HACKS 2025", "STOP WASTING TIME", "THE UNFAIR WAY", "AI THAY ĐỔI TẤT CẢ" ],
                        style: "Chủ đề Giáo dục / AI / Hướng dẫn → Sử dụng nền trắng hoặc xanh lam nhạt, text màu đen hoặc xanh đậm để tối ưu độ tương phản. Biểu cảm nhân vật nên thân thiện, tự tin và nhìn thẳng vào người xem.",
                        prompt: "A confident young Vietnamese man pointing at a glowing AI brain logo, bright and clean background, modern tech office setting, cinematic soft lighting, shot on Sony A7S III"
                    };

                    setAnalysisResult(mockAnalysis);
                    setSuggestions(mockSuggestions);
                    setIsLoading(false);
                }, 2000);
            }, [image, title]);

            return (
                <div className="min-h-screen w-full text-white">
                    <div className="absolute top-0 left-0 w-full h-full bg-grid-custom"></div>
                    <div className="absolute inset-0 bg-gradient-to-b from-slate-900/50 via-slate-900 to-slate-900"></div>

                    <main className="container mx-auto px-4 py-8 md:py-16 relative z-10">
                        <header className="text-center mb-12">
                            <h1 className="text-4xl md:text-5xl font-extrabold tracking-tight">
                                AI YouTube Thumbnail <span className="text-cyan-400">Analyzer</span>
                            </h1>
                            <p className="mt-4 text-lg text-slate-400 max-w-2xl mx-auto">
                                Phân tích và cải thiện thumbnail của bạn để tăng tỷ lệ nhấp chuột (CTR) với sức mạnh của AI.
                            </p>
                        </header>

                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12">
                            {/* --- CỘT TRÁI: INPUT --- */}
                            <div className="bg-slate-800/50 p-6 md:p-8 rounded-2xl border border-slate-700 backdrop-blur-sm self-start">
                                <h2 className="text-2xl font-bold mb-2">Bước 1: Nhập thông tin</h2>
                                <p className="text-slate-400 mb-6">Tải lên thumbnail và tiêu đề video hiện tại của bạn.</p>
                                
                                <div className="space-y-6">
                                    <div>
                                        <label className="block text-sm font-medium text-slate-300 mb-2">
                                            Upload Thumbnail
                                        </label>
                                        <div className="mt-2 flex justify-center rounded-lg border border-dashed border-slate-600 px-6 py-10 hover:border-cyan-400 transition-colors">
                                            <div className="text-center">
                                                {image ? (
                                                    <img src={image} alt="Preview" className="mx-auto h-32 rounded-md object-contain" />
                                                ) : (
                                                    <UploadCloudIcon className="mx-auto h-12 w-12 text-slate-500" />
                                                )}
                                                <div className="mt-4 flex text-sm leading-6 text-slate-400 justify-center">
                                                    <label
                                                        htmlFor="file-upload"
                                                        className="relative cursor-pointer rounded-md font-semibold text-cyan-400 focus-within:outline-none focus-within:ring-2 focus-within:ring-cyan-500 focus-within:ring-offset-2 focus-within:ring-offset-slate-900 hover:text-cyan-300"
                                                    >
                                                        <span>Tải ảnh lên</span>
                                                        <input id="file-upload" name="file-upload" type="file" className="sr-only" accept="image/png, image/jpeg, image/webp" onChange={handleImageChange} />
                                                    </label>
                                                    <p className="pl-1">hoặc kéo và thả</p>
                                                </div>
                                                <p className="text-xs leading-5 text-slate-500">{fileName || 'PNG, JPG, WEBP tối đa 5MB'}</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div>
                                        <label htmlFor="video-title" className="block text-sm font-medium text-slate-300 mb-2">
                                            Tiêu đề Video
                                        </label>
                                        <input
                                            type="text"
                                            name="video-title"
                                            id="video-title"
                                            className="block w-full rounded-md border-0 bg-white/5 py-2 px-3 text-white shadow-sm ring-1 ring-inset ring-slate-600 placeholder:text-slate-500 focus:ring-2 focus:ring-inset focus:ring-cyan-500 sm:text-sm sm:leading-6 transition"
                                            placeholder="Ví dụ: 5 AI Hacks Bạn Cần Biết Ngay!"
                                            value={title}
                                            onChange={(e) => setTitle(e.target.value)}
                                        />
                                    </div>
                                </div>

                                {error && <p className="mt-4 text-sm text-red-400">{error}</p>}
                                
                                <div className="mt-8">
                                    <button
                                        onClick={handleAnalyze}
                                        disabled={isLoading || !image || !title}
                                        className="w-full flex items-center justify-center gap-2 rounded-md bg-cyan-500 px-3.5 py-2.5 text-sm font-semibold text-slate-900 shadow-sm hover:bg-cyan-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300"
                                    >
                                        {isLoading ? (
                                            <React.Fragment>
                                                <svg className="animate-spin -ml-1 mr-3 h-5 w-5 text-slate-900" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                                    <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                                                    <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                                </svg>
                                                Đang phân tích...
                                            </React.Fragment>
                                        ) : (
                                            <React.Fragment>
                                                <WandSparklesIcon className="w-5 h-5"/>
                                                Phân tích bằng AI
                                            </React.Fragment>
                                        )}
                                    </button>
                                </div>
                            </div>
                            
                            {/* --- CỘT PHẢI: OUTPUT --- */}
                            <div className="min-h-[400px]">
                                {isLoading && (
                                    <div className="flex flex-col items-center justify-center h-full bg-slate-800/50 p-8 rounded-2xl border border-dashed border-slate-700">
                                        <svg className="animate-spin h-10 w-10 text-cyan-400 mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                            <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                                            <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                        </svg>
                                        <p className="text-lg font-semibold text-slate-300">AI đang phân tích thumbnail của bạn...</p>
                                        <p className="text-sm text-slate-400">Quá trình này có thể mất vài giây.</p>
                                    </div>
                                )}
                                {!isLoading && analysisResult && (
                                    <div>
                                        <div className="mb-4">
                                            <div className="border-b border-slate-700">
                                                <nav className="-mb-px flex space-x-6" aria-label="Tabs">
                                                    <button
                                                        onClick={() => setActiveTab('analysis')}
                                                        className={`${
                                                            activeTab === 'analysis'
                                                                ? 'border-cyan-400 text-cyan-400'
                                                                : 'border-transparent text-slate-400 hover:text-slate-200 hover:border-slate-500'
                                                        } whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors`}
                                                    >
                                                        Phân tích chi tiết
                                                    </button>
                                                    <button
                                                        onClick={() => setActiveTab('suggestions')}
                                                        className={`${
                                                            activeTab === 'suggestions'
                                                                ? 'border-cyan-400 text-cyan-400'
                                                                : 'border-transparent text-slate-400 hover:text-slate-200 hover:border-slate-500'
                                                        } whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors`}
                                                    >
                                                        Gợi ý Cải thiện
                                                    </button>
                                                </nav>
                                            </div>
                                        </div>
                                        <div>
                                            {activeTab === 'analysis' && <AnalysisResults analysis={analysisResult} />}
                                            {activeTab === 'suggestions' && suggestions && <Suggestions suggestions={suggestions} />}
                                        </div>
                                    </div>
                                )}
                                {!isLoading && !analysisResult && (
                                    <div className="flex flex-col items-center justify-center h-full bg-slate-800/50 p-8 rounded-2xl border border-dashed border-slate-700">
                                        <WandSparklesIcon className="w-12 h-12 text-slate-600 mb-4" />
                                        <h3 className="text-lg font-semibold text-slate-300">Kết quả phân tích sẽ xuất hiện ở đây</h3>
                                        <p className="text-sm text-center text-slate-500 mt-1">Hoàn thành Bước 1 để bắt đầu quá trình phân tích của AI.</p>
                                    </div>
                                )}
                            </div>
                        </div>
                    </main>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>

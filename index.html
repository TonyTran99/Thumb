<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI YouTube Thumbnail Analyzer (Pro Version)</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React Libraries -->
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <!-- Babel to transpile JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* Custom font to match the modern UI */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        /* A custom style to create the grid background effect */
        .bg-grid-custom {
            background-image:
                linear-gradient(rgba(100, 116, 139, 0.1) 1px, transparent 1px),
                linear-gradient(to right, rgba(100, 116, 139, 0.1) 1px, transparent 1px);
            background-size: 2rem 2rem;
        }
        /* Simple fade-in animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
    </style>
</head>
<body class="bg-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useCallback, useMemo } = React;

        // --- ICONS ---
        const UploadCloudIcon = (props) => (
          <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242" /><path d="M12 12v9" /><path d="m16 16-4-4-4 4" />
          </svg>
        );

        const WandSparklesIcon = (props) => (
          <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <path d="m22 2-7 20-4-9-9-4Z" /><path d="M13 22 22 13" />
          </svg>
        );

        const CheckCircleIcon = (props) => (
            <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" /><polyline points="22 4 12 14.01 9 11.01" />
            </svg>
        );

        const XCircleIcon = (props) => (
            <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>
            </svg>
        );
        
        const ZapIcon = (props) => (
          <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>
        );


        // --- CHILD COMPONENTS ---
        const AnalysisItem = ({ data }) => {
            const getScoreStyle = (score) => {
                if (score >= 8) return { label: 'Tốt', color: 'bg-green-500/10 text-green-400' };
                if (score >= 5) return { label: 'Khá', color: 'bg-yellow-500/10 text-yellow-400' };
                return { label: 'Cần cải thiện', color: 'bg-red-500/10 text-red-400' };
            };
            
            const scoreStyle = getScoreStyle(data.score);

            return (
                <div className="bg-slate-800/60 border border-slate-700 p-4 rounded-xl backdrop-blur-sm">
                    <h4 className="text-md font-bold text-cyan-400 mb-1">{data.title}</h4>
                    <p className="italic text-slate-400 text-xs mb-3">"{data.question}"</p>
                    <ul className="space-y-2 text-sm mb-4">
                        {data.checklist.map((item, index) => (
                            <li key={index} className={`flex items-start ${item.status ? 'text-slate-300' : 'text-slate-500'}`}>
                                {item.status 
                                    ? <CheckCircleIcon className="w-4 h-4 text-green-400 mr-2 mt-0.5 flex-shrink-0" /> 
                                    : <XCircleIcon className="w-4 h-4 text-slate-600 mr-2 mt-0.5 flex-shrink-0" />}
                                <span>{item.text}</span>
                            </li>
                        ))}
                    </ul>
                    <div className="bg-slate-900/50 p-3 rounded-md">
                        <div className="flex justify-between items-center text-sm font-medium">
                            <span className="text-slate-300">Đánh giá:</span>
                            <span className={`px-2 py-0.5 rounded-full text-xs font-semibold ${scoreStyle.color}`}>{scoreStyle.label}</span>
                        </div>
                        <p className="text-xs text-slate-400 mt-2">{data.summary}</p>
                    </div>
                </div>
            );
        };
        
        const AnalysisResults = ({ analysis }) => (
            <div className="animate-fade-in space-y-4">
                {analysis.map((item, index) => <AnalysisItem key={index} data={item} />)}
            </div>
        );

        const Suggestions = ({ suggestions }) => (
            <div className="bg-slate-800/50 p-6 rounded-2xl border border-slate-700 backdrop-blur-sm space-y-6 animate-fade-in">
                
                <div className="bg-slate-900/50 border border-slate-700 p-4 rounded-lg">
                     <h4 className="text-lg font-semibold text-cyan-400 mb-2">Phân tích Chiến lược</h4>
                     <p className="text-sm text-slate-400 mb-1"><span className="font-semibold text-slate-300">Chủ đề chính:</span> {suggestions.theme}</p>
                     <p className="text-sm text-slate-400 mb-1"><span className="font-semibold text-slate-300">Vòng lặp Ham muốn:</span> {suggestions.strategicAnalysis.desireLoop}</p>
                     <p className="text-sm text-slate-400"><span className="font-semibold text-slate-300">Khoảng trống Tò mò:</span> {suggestions.strategicAnalysis.curiosityGap}</p>
                </div>

                <div>
                    <h4 className="text-lg font-semibold text-cyan-400 mb-2">A. Gợi ý Tiêu đề (YouTube SEO)</h4>
                    <ul className="list-disc list-inside space-y-2 text-slate-300 pl-2 text-sm">
                        {suggestions.titleSuggestions.map((title, i) => <li key={i}>{title}</li>)}
                    </ul>
                </div>

                <div>
                    <h4 className="text-lg font-semibold text-cyan-400 mb-3">B. Ý tưởng Thumbnail</h4>
                     <div className="space-y-3 text-sm">
                        <p><strong className="text-slate-300">"Súng gây choáng" chính:</strong> <span className="text-slate-400">{suggestions.thumbnailConcept.primaryStunGun}</span></p>
                        <p><strong className="text-slate-300">Bố cục đề xuất:</strong> <span className="text-slate-400">{suggestions.thumbnailConcept.composition}</span></p>
                        <p><strong className="text-slate-300">Quy tắc 3 Yếu tố:</strong> <span className="text-slate-400">{suggestions.thumbnailConcept.maxElements}</span></p>
                        <div>
                            <strong className="text-slate-300 block mb-2">Gợi ý Text trên ảnh:</strong>
                            <div className="flex flex-wrap gap-2">
                                {suggestions.thumbnailConcept.textSuggestions.map((text, i) => (
                                    <span key={i} className="bg-cyan-400/10 text-cyan-300 text-xs font-medium px-3 py-1 rounded-full">{text}</span>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h4 className="text-lg font-semibold text-cyan-400 mb-3">C. Thực thi Thiết kế</h4>
                     <div className="space-y-3 text-sm">
                        <p><strong className="text-slate-300">Bảng màu:</strong> <span className="text-slate-400">{suggestions.designExecution.colorPalette}</span></p>
                        <p><strong className="text-slate-300">Cảm xúc & Ánh sáng:</strong> <span className="text-slate-400">{suggestions.designExecution.emotionAndLighting}</span></p>
                        <p><strong className="text-slate-300">Mẹo nâng cao:</strong> <span className="text-slate-400">{suggestions.designExecution.notes}</span></p>
                    </div>
                </div>

                <div>
                    <h4 className="text-lg font-semibold text-cyan-400 mb-2">D. Gợi ý Prompt tạo ảnh AI</h4>
                    <div className="bg-slate-900 p-4 rounded-lg border border-slate-700">
                        <p className="text-slate-300 font-mono text-sm">{suggestions.aiPrompt}</p>
                        <button 
                            onClick={() => {
                                navigator.clipboard.writeText(suggestions.aiPrompt);
                                alert('Đã sao chép prompt!');
                            }}
                            className="mt-3 text-xs bg-slate-700 hover:bg-slate-600 text-white font-semibold py-1 px-3 rounded-md transition-colors"
                        >
                            Copy Prompt
                        </button>
                    </div>
                </div>
            </div>
        );

        // --- MAIN APP COMPONENT ---
        function App() {
            const [image, setImage] = useState(null);
            const [title, setTitle] = useState('');
            const [fileName, setFileName] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const [analysisResult, setAnalysisResult] = useState(null);
            const [suggestions, setSuggestions] = useState(null);
            const [activeTab, setActiveTab] = useState('analysis');
            const [error, setError] = useState('');

            // =================================================================
            // DYNAMIC LOGIC BASED ON USER'S PLAYBOOK
            // =================================================================
            const detectTheme = (videoTitle) => {
                const lowerCaseTitle = videoTitle.toLowerCase();
                if (['how to', 'guide', 'ai', 'learn', 'hacks', 'tutorial', 'review'].some(kw => lowerCaseTitle.includes(kw))) return 'education';
                if (['warning', 'stop', 'mistake', 'problem', 'why your', 'danger', 'fix'].some(kw => lowerCaseTitle.includes(kw))) return 'warning';
                if (['motivation', 'secret', 'success', 'millionaire', 'unlock', 'powerful', 'change your life'].some(kw => lowerCaseTitle.includes(kw))) return 'motivation';
                if (['i tried', 'challenge', 'vlog', 'my trip', 'day in the life', 'experiment'].some(kw => lowerCaseTitle.includes(kw))) return 'entertainment';
                return 'general';
            };

            const generateSuggestions = (theme) => {
                const suggestionSets = {
                    education: {
                        theme: "Giáo dục / Hướng dẫn",
                        strategicAnalysis: {
                            desireLoop: "Người xem muốn có được một kỹ năng hoặc kiến thức mới để giải quyết một vấn đề cụ thể (ví dụ: phát triển nhanh hơn, tiết kiệm thời gian).",
                            curiosityGap: "Phương pháp hoặc bí quyết được chia sẻ trong video này là gì mà tôi chưa biết?"
                        },
                        titleSuggestions: ["Cách [Chuyên Gia] Dùng [Công Cụ] Để Đạt Kết Quả X10", "Hướng Dẫn [Chủ Đề] Toàn Tập Cho Người Mới (2025)", "5 [Chủ Đề] Hacks Giúp Tiết Kiệm 20 Giờ/Tuần"],
                        thumbnailConcept: {
                            primaryStunGun: "Đồ họa hấp dẫn (Compelling Graphic) hoặc Bố cục A/B (So sánh Trước/Sau).",
                            composition: "A/B (Trước/Sau) để thể hiện sự chuyển đổi, hoặc Bất đối xứng với đồ họa minh họa quy trình.",
                            maxElements: "3 (Khuôn mặt/Biểu tượng + Text chính + Đồ họa minh họa).",
                            textSuggestions: ["AI HACKS 2025", "MASTERCLASS", "THE ULTIMATE GUIDE", "PRO LEVEL"],
                        },
                        designExecution: {
                            colorPalette: "Nền sáng (trắng, xanh lam nhạt) với text màu tối (đen, xanh đậm) để tối ưu độ tương phản, dễ đọc.",
                            emotionAndLighting: "Biểu cảm nhân vật nên thân thiện, tự tin, nhìn thẳng vào người xem. Ánh sáng mềm mại, rõ ràng.",
                            notes: "Sử dụng các biểu tượng đồ họa đơn giản, dễ hiểu để trực quan hóa quy trình hoặc kết quả."
                        },
                        aiPrompt: "A smiling, confident tech expert pointing to a glowing AI logo on a screen, bright and clean background, modern office setting, soft cinematic lighting, shot on Sony A7S III"
                    },
                    warning: {
                        theme: "Cảnh báo / Giải pháp",
                        strategicAnalysis: {
                            desireLoop: "Người xem có một nỗi đau hoặc nỗi sợ (ví dụ: làm sai, thất bại, lãng phí thời gian) và muốn tìm giải pháp để tránh nó.",
                            curiosityGap: "Sai lầm nguy hiểm đó là gì và làm thế nào để tôi phòng tránh nó ngay lập tức?"
                        },
                        titleSuggestions: ["Cảnh Báo: 7 Sai Lầm Chết Người Khiến Bạn Thất Bại Với [Chủ Đề]", "Đừng Làm [Hành Động] Nếu Bạn Chưa Biết Điều Này!", "Tại Sao 99% Mọi người Thất Bại Với [Chủ Đề] (Và Cách Sửa)"],
                        thumbnailConcept: {
                            primaryStunGun: "Khuôn mặt lớn với cảm xúc mạnh (Sốc/Lo lắng) + Màu sắc tương phản cao (Đỏ/Đen).",
                            composition: "Bất đối xứng, đặt khuôn mặt ở một bên để tạo kịch tính. Có thể thêm vòng tròn đỏ để nhấn mạnh.",
                            maxElements: "3 (Khuôn mặt biểu cảm + Text cảnh báo + Biểu tượng nguy hiểm).",
                            textSuggestions: ["WARNING!", "STOP DOING THIS", "THE HIDDEN DANGER", "MISTAKE TO AVOID"],
                        },
                        designExecution: {
                            colorPalette: "Nền tối (đen/xám đậm) với các điểm nhấn màu đỏ hoặc vàng để tạo cảm giác cấp bách, nguy hiểm.",
                            emotionAndLighting: "Khuôn mặt thể hiện sự sốc, hoảng hốt hoặc nghiêm túc. Ánh sáng kịch tính, có thể dùng viền sáng (rim lighting) màu đỏ.",
                            notes: "Tránh đặt chữ ở góc dưới bên phải (vị trí của timestamp). Sử dụng bóng đổ để chữ nổi bật trên nền."
                        },
                        aiPrompt: "A person with a shocked expression looking at a cracked screen displaying a red warning symbol, dark cinematic background, dramatic red neon rim lighting"
                    },
                    motivation: {
                        theme: "Động lực / Phát triển bản thân",
                        strategicAnalysis: {
                            desireLoop: "Người xem khao khát một kết quả lớn lao (thành công, giàu có, hạnh phúc) và muốn biết con đường tắt hoặc bí quyết để đạt được nó.",
                            curiosityGap: "Bí mật hoặc phương pháp nào đã giúp người này đạt được thành công phi thường đó?"
                        },
                        titleSuggestions: ["Bí Mật Giúp Tôi Kiếm [Số Tiền] Từ [Chủ Đề] Ở Tuổi [Tuổi]", "Cách Thay Đổi Cuộc Đời Bạn Trong 30 Ngày Với [Chủ Đề]", "Sức Mạnh Ít Ai Biết Của [Chủ Đề]"],
                        thumbnailConcept: {
                            primaryStunGun: "Hình ảnh thẩm mỹ cao (Aesthetic Imagery) hoặc Con số/Tiền tệ cỡ lớn.",
                            composition: "Đối xứng (Symmetrical) để tạo cảm giác cân bằng, mạnh mẽ, hoặc Bất đối xứng với nhân vật nhìn về phía trước.",
                            maxElements: "3 (Hình ảnh biểu tượng + Text chính + Một con số/kết quả).",
                            textSuggestions: ["LEVEL UP", "$1,000,000 SECRET", "30-DAY CHALLENGE", "UNLOCK YOUR POTENTIAL"],
                        },
                        designExecution: {
                            colorPalette: "Độ tương phản cực mạnh (nền đen - chữ neon/vàng cam). Sử dụng màu sắc truyền cảm hứng.",
                            emotionAndLighting: "Biểu cảm tự tin, quyền lực. Ánh sáng điện ảnh, có thể là cảnh bình minh hoặc ngược sáng (silhouette).",
                            notes: "Ưu tiên các yếu tố lớn, rõ ràng. Hình ảnh phải trông cao cấp và đầy khát vọng."
                        },
                        aiPrompt: "Silhouette of a person standing on a mountain peak at sunrise, looking confident, powerful orange and golden light, epic cinematic style, lens flare"
                    },
                    entertainment: {
                        theme: "Giải trí / Vlog / Thử thách",
                        strategicAnalysis: {
                            desireLoop: "Người xem tò mò về một trải nghiệm độc đáo, hài hước hoặc kịch tính và muốn xem kết quả của nó.",
                            curiosityGap: "Chuyện gì đã xảy ra trong trải nghiệm điên rồ/thú vị này?"
                        },
                        titleSuggestions: ["Tôi Đã Thử [Thử Thách Điên Rồ] và Đây Là Kết Quả!", "Trải Nghiệm 24 Giờ Sống Như [Người Nổi Tiếng]", "Vlog [Địa Điểm]: Chuyến Đi Bất Ổn Nhất Của Tôi"],
                         thumbnailConcept: {
                            primaryStunGun: "Thiết kế kiểu cắt dán (Collage) hoặc Khuôn mặt với cảm xúc cường điệu.",
                            composition: "Bất đối xứng, năng động. Có thể hơi lộn xộn một cách có chủ đích để tạo cảm giác chân thực, vui vẻ.",
                            maxElements: "Nhiều (kiểu collage) hoặc 3 (Khuôn mặt + Text + Hình ảnh kết quả).",
                            textSuggestions: ["I TRIED IT!", "OMG!", "WHAT HAPPENED?!", "24 HOUR CHALLENGE"],
                        },
                        designExecution: {
                            colorPalette: "Màu sắc tươi sáng, rực rỡ, có thể là đa sắc màu. Không ngại dùng các màu nổi bật.",
                            emotionAndLighting: "Cảm xúc cường điệu hóa: cực kỳ ngạc nhiên, vui vẻ tột độ, hoặc hài hước. Ánh sáng tự nhiên, tươi sáng.",
                            notes: "Thêm các mũi tên, vòng tròn hoặc sticker để tăng thêm sự vui nhộn và hướng sự chú ý."
                        },
                        aiPrompt: "A young person with a comical, exaggerated surprised face, holding a weird food item, colorful and bright background with motion blur, fun and energetic style"
                    }
                };
                suggestionSets.general = suggestionSets.education;
                return suggestionSets[theme];
            };

            const generateAnalysis = () => {
                const randomBool = () => Math.random() > 0.4; // 60% chance of true
                const randomScore = () => 3 + Math.floor(Math.random() * 7); // Score between 3-9
                
                return [
                    {
                        title: "1. Quan sát “Cú Sốc Thị Giác” – Visual Stun Gun",
                        question: "Nếu tôi lướt thật nhanh, mắt tôi có bị dừng lại không?",
                        score: randomScore(),
                        checklist: [
                            { text: "Màu sắc tương phản cực mạnh (xanh – cam, đỏ – trắng...).", status: randomBool() },
                            { text: "Có một yếu tố nổi bật (khuôn mặt to, cử chỉ tay mạnh).", status: randomBool() },
                            { text: "Dùng mũi tên đỏ, vòng tròn để chỉ dẫn mắt.", status: Math.random() > 0.7 },
                            { text: "Chủ thể sáng – nền tối hoặc ngược lại, tách bạch rõ.", status: randomBool() }
                        ],
                        summary: "Đánh giá khả năng thu hút sự chú ý ban đầu của thumbnail trong một biển thông tin."
                    },
                    {
                        title: "2. Kiểm tra “Vòng Lặp Ham Muốn” – Desire / Curiosity Loop",
                        question: "Nó gợi ra vấn đề tôi muốn giải quyết, hay một điều tôi tò mò chưa biết?",
                        score: randomScore(),
                        checklist: [
                             { text: "Khơi gợi câu hỏi “Làm sao?” / “Tại sao?” trong tâm trí người xem.", status: randomBool() },
                             { text: "Có dấu hiệu của điểm đau (ví dụ: “Sai lầm”, “Thất bại”).", status: Math.random() > 0.6 },
                             { text: "Thể hiện kết quả ham muốn (ví dụ: “Từ 0 đến 100K”, “Gấp 3 doanh thu”).", status: randomBool() },
                             { text: "Phối hợp hình và chữ để mở ra câu hỏi chưa được trả lời.", status: randomBool() }
                        ],
                        summary: "Kiểm tra xem thumbnail có tạo ra một lý do tâm lý đủ mạnh để người xem phải nhấp chuột hay không."
                    },
                    {
                        title: "3. Xem Sự Phối Hợp Tiêu Đề – Thumbnail (Title–Image Sync)",
                        question: "Hình có làm rõ lời hứa trong tiêu đề không?",
                        score: randomScore(),
                        checklist: [
                             { text: "Hình ảnh và chữ KHÔNG lặp lại, mà bổ sung cho nhau.", status: randomBool() },
                             { text: "Thông điệp hình ảnh củng cố niềm tin vào điều tiêu đề hứa hẹn.", status: randomBool() },
                             { text: "Cảm xúc trên khuôn mặt phù hợp với lời hứa của tiêu đề.", status: randomBool() }
                        ],
                        summary: "Đây là bước 'Xác thực bằng Hình ảnh' cuối cùng. Sự đồng bộ quyết định cú nhấp chuột."
                    },
                    {
                        title: "4. Kiểm tra “Quy Tắc Ba Yếu Tố” (3 Elements Rule)",
                        question: "Thumbnail này có quá tải không? Tôi có thể hiểu nội dung trong 1 giây không?",
                        score: randomScore(),
                        checklist: [
                             { text: "Chỉ có tối đa 3 yếu tố chính (ví dụ: mặt, text, biểu tượng).", status: randomBool() },
                             { text: "Không có chi tiết nhỏ, rối mắt; font chữ dày, dễ đọc.", status: randomBool() },
                             { text: "Nhìn rõ ràng và dễ hiểu ngay cả trên màn hình điện thoại.", status: randomBool() }
                        ],
                        summary: "Sự đơn giản là chìa khóa để não bộ xử lý thông tin nhanh chóng và quyết định nhấp chuột."
                    },
                    {
                        title: "5. Quan sát “Cảm Xúc – Ánh Nhìn – Hướng Tay”",
                        question: "Mắt và tay nhân vật đang dẫn tôi nhìn về đâu?",
                        score: randomScore(),
                        checklist: [
                             { text: "Hướng mắt, hướng tay, hoặc đường sáng dẫn bạn tới điểm chính.", status: randomBool() },
                             { text: "Khuôn mặt thể hiện đúng cảm xúc mà video hứa hẹn.", status: randomBool() },
                             { text: "Hình ảnh có chiều sâu (shadow, mờ nền) để tách rõ chủ thể.", status: randomBool() }
                        ],
                        summary: "Các yếu tố vô hình này điều khiển tiềm thức của người xem và xây dựng kết nối cảm xúc."
                    },
                     {
                        title: "6. Tiềm năng “Thử Nghiệm A/B” – Testing Pattern",
                        question: "Thumbnail này có dễ dàng tạo ra các biến thể để thử nghiệm không?",
                        score: randomScore(),
                        checklist: [
                             { text: "Gợi ý 1: Thử đổi màu nền để tăng độ tương phản.", status: true },
                             { text: "Gợi ý 2: Thay đổi biểu cảm khuôn mặt (ví dụ: từ ngạc nhiên sang vui vẻ).", status: true },
                             { text: "Gợi ý 3: Thay đổi text trên ảnh để nhấn mạnh vào 'điểm đau' thay vì 'kết quả'.", status: true }
                        ],
                        summary: "Một thumbnail tốt không chỉ hiệu quả mà còn linh hoạt. Luôn nghĩ cách để thử nghiệm và tối ưu hóa."
                    },
                ];
            };

            const handleImageChange = (e) => {
                const file = e.target.files[0];
                if (file) {
                    if (file.size > 5 * 1024 * 1024) { // 5MB limit
                        setError('Kích thước ảnh quá lớn. Vui lòng chọn ảnh dưới 5MB.');
                        return;
                    }
                    setError('');
                    setFileName(file.name);
                    const reader = new FileReader();
                    reader.onloadend = () => { setImage(reader.result); };
                    reader.readAsDataURL(file);
                }
            };
            
            const handleAnalyze = useCallback(() => {
                if (!image || !title) {
                    setError('Vui lòng tải lên thumbnail và nhập tiêu đề video.');
                    return;
                }
                setError('');
                setIsLoading(true);
                setAnalysisResult(null);
                setSuggestions(null);
                setActiveTab('analysis');

                setTimeout(() => {
                    const theme = detectTheme(title);
                    const dynamicSuggestions = generateSuggestions(theme);
                    const dynamicAnalysis = generateAnalysis();
                    
                    setAnalysisResult(dynamicAnalysis);
                    setSuggestions(dynamicSuggestions);
                    setIsLoading(false);
                }, 2000);
            }, [image, title]);

            return (
                <div className="min-h-screen w-full text-white">
                    <div className="absolute top-0 left-0 w-full h-full bg-grid-custom"></div>
                    <div className="absolute inset-0 bg-gradient-to-b from-slate-900/50 via-slate-900 to-slate-900"></div>

                    <main className="container mx-auto px-4 py-8 md:py-16 relative z-10">
                        <header className="text-center mb-12">
                            <h1 className="text-4xl md:text-5xl font-extrabold tracking-tight">
                                AI YouTube Thumbnail <span className="text-cyan-400">Analyzer</span>
                            </h1>
                            <p className="mt-4 text-lg text-slate-400 max-w-2xl mx-auto">
                                Phân tích và cải thiện thumbnail của bạn với quy trình chuyên nghiệp dựa trên tâm lý học người xem.
                            </p>
                        </header>

                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12">
                            {/* --- LEFT COLUMN: INPUT --- */}
                            <div className="bg-slate-800/50 p-6 md:p-8 rounded-2xl border border-slate-700 backdrop-blur-sm self-start">
                                <h2 className="text-2xl font-bold mb-2">Bước 1: Nhập thông tin</h2>
                                <p className="text-slate-400 mb-6">Tải lên thumbnail và tiêu đề video hiện tại của bạn.</p>
                                
                                <div className="space-y-6">
                                    <div>
                                        <label className="block text-sm font-medium text-slate-300 mb-2">
                                            Upload Thumbnail
                                        </label>
                                        <div className="mt-2 flex justify-center rounded-lg border border-dashed border-slate-600 px-6 py-10 hover:border-cyan-400 transition-colors">
                                            <div className="text-center">
                                                {image ? (
                                                    <img src={image} alt="Preview" className="mx-auto h-32 rounded-md object-contain" />
                                                ) : (
                                                    <UploadCloudIcon className="mx-auto h-12 w-12 text-slate-500" />
                                                )}
                                                <div className="mt-4 flex text-sm leading-6 text-slate-400 justify-center">
                                                    <label
                                                        htmlFor="file-upload"
                                                        className="relative cursor-pointer rounded-md font-semibold text-cyan-400 focus-within:outline-none focus-within:ring-2 focus-within:ring-cyan-500 focus-within:ring-offset-2 focus-within:ring-offset-slate-900 hover:text-cyan-300"
                                                    >
                                                        <span>Tải ảnh lên</span>
                                                        <input id="file-upload" name="file-upload" type="file" className="sr-only" accept="image/png, image/jpeg, image/webp" onChange={handleImageChange} />
                                                    </label>
                                                    <p className="pl-1">hoặc kéo và thả</p>
                                                </div>
                                                <p className="text-xs leading-5 text-slate-500">{fileName || 'PNG, JPG, WEBP tối đa 5MB'}</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div>
                                        <label htmlFor="video-title" className="block text-sm font-medium text-slate-300 mb-2">
                                            Tiêu đề Video
                                        </label>
                                        <input
                                            type="text"
                                            name="video-title"
                                            id="video-title"
                                            className="block w-full rounded-md border-0 bg-white/5 py-2 px-3 text-white shadow-sm ring-1 ring-inset ring-slate-600 placeholder:text-slate-500 focus:ring-2 focus:ring-inset focus:ring-cyan-500 sm:text-sm sm:leading-6 transition"
                                            placeholder="Ví dụ: 5 AI Hacks Bạn Cần Biết Ngay!"
                                            value={title}
                                            onChange={(e) => setTitle(e.target.value)}
                                        />
                                    </div>
                                </div>

                                {error && <p className="mt-4 text-sm text-red-400">{error}</p>}
                                
                                <div className="mt-8">
                                    <button
                                        onClick={handleAnalyze}
                                        disabled={isLoading || !image || !title}
                                        className="w-full flex items-center justify-center gap-2 rounded-md bg-cyan-500 px-3.5 py-2.5 text-sm font-semibold text-slate-900 shadow-sm hover:bg-cyan-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300"
                                    >
                                        {isLoading ? (
                                            <React.Fragment>
                                                <svg className="animate-spin -ml-1 mr-3 h-5 w-5 text-slate-900" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                                    <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                                                    <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                                </svg>
                                                Đang phân tích...
                                            </React.Fragment>
                                        ) : (
                                            <React.Fragment>
                                                <ZapIcon className="w-5 h-5"/>
                                                Phân tích & Cải thiện
                                            </React.Fragment>
                                        )}
                                    </button>
                                </div>
                            </div>
                            
                            {/* --- RIGHT COLUMN: OUTPUT --- */}
                            <div className="min-h-[400px]">
                                {isLoading && (
                                    <div className="flex flex-col items-center justify-center h-full bg-slate-800/50 p-8 rounded-2xl border border-dashed border-slate-700">
                                        <svg className="animate-spin h-10 w-10 text-cyan-400 mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                            <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                                            <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                        </svg>
                                        <p className="text-lg font-semibold text-slate-300">AI đang phân tích thumbnail của bạn...</p>
                                        <p className="text-sm text-slate-400">Quá trình này có thể mất vài giây.</p>
                                    </div>
                                )}
                                {!isLoading && analysisResult && (
                                    <div>
                                        <div className="mb-4">
                                            <div className="border-b border-slate-700">
                                                <nav className="-mb-px flex space-x-6" aria-label="Tabs">
                                                    <button
                                                        onClick={() => setActiveTab('analysis')}
                                                        className={`${
                                                            activeTab === 'analysis'
                                                                ? 'border-cyan-400 text-cyan-400'
                                                                : 'border-transparent text-slate-400 hover:text-slate-200 hover:border-slate-500'
                                                        } whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors`}
                                                    >
                                                        Phân tích Chiến lược
                                                    </button>
                                                    <button
                                                        onClick={() => setActiveTab('suggestions')}
                                                        className={`${
                                                            activeTab === 'suggestions'
                                                                ? 'border-cyan-400 text-cyan-400'
                                                                : 'border-transparent text-slate-400 hover:text-slate-200 hover:border-slate-500'
                                                        } whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors`}
                                                    >
                                                        Gợi ý Cải thiện (Pro)
                                                    </button>
                                                </nav>
                                            </div>
                                        </div>
                                        <div>
                                            {activeTab === 'analysis' && <AnalysisResults analysis={analysisResult} />}
                                            {activeTab === 'suggestions' && suggestions && <Suggestions suggestions={suggestions} />}
                                        </div>
                                    </div>
                                )}
                                {!isLoading && !analysisResult && (
                                    <div className="flex flex-col items-center justify-center h-full bg-slate-800/50 p-8 rounded-2xl border border-dashed border-slate-700">
                                        <WandSparklesIcon className="w-12 h-12 text-slate-600 mb-4" />
                                        <h3 className="text-lg font-semibold text-slate-300">Kết quả phân tích sẽ xuất hiện ở đây</h3>
                                        <p className="text-sm text-center text-slate-500 mt-1">Hoàn thành Bước 1 để bắt đầu quá trình phân tích của AI.</p>
                                    </div>
                                )}
                            </div>
                        </div>
                    </main>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>

